### Interactions API Tests

### Variables
@baseUrl = http://localhost:8000/api
@token = your_jwt_token_here
@adminToken = admin_jwt_token_here

### 1. Get All Reviews (Only visible reviews - no blocked/deleted/banned users)
GET {{baseUrl}}/interactions/reviews/
Authorization: Bearer {{token}}

### 2. Create New Review
POST {{baseUrl}}/interactions/reviews/
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "gym": 1,
    "rating": 5,
    "comment": "Great gym with excellent facilities!"
}

### 3. Get Review Details
GET {{baseUrl}}/interactions/reviews/1/
Authorization: Bearer {{token}}

### 4. Update Review (Owner only)
PUT {{baseUrl}}/interactions/reviews/1/
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "gym": 1,
    "rating": 4,
    "comment": "Updated review comment"
}

### 5. Delete Review (Owner only)
DELETE {{baseUrl}}/interactions/reviews/1/
Authorization: Bearer {{token}}

### 6. Report Review (Gym Owner only)
POST {{baseUrl}}/interactions/reviews/1/report/
Authorization: Bearer {{token}}

### 7. Reply to Review (Gym Owner only)
POST {{baseUrl}}/interactions/reviews/
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "gym": 1,
    "rating": 5,
    "comment": "Thank you for your feedback!",
    "reply_to": 1
}

### 8. Get User Favorites
GET {{baseUrl}}/interactions/favorites/
Authorization: Bearer {{token}}

### 9. Add Gym to Favorites
POST {{baseUrl}}/interactions/favorites/
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "gym": 1
}

### 10. Get Favorite Details
GET {{baseUrl}}/interactions/favorites/1/
Authorization: Bearer {{token}}

### 11. Remove from Favorites
DELETE {{baseUrl}}/interactions/favorites/1/
Authorization: Bearer {{token}}

### 12. Get Gym Reviews
GET {{baseUrl}}/interactions/reviews/?gym=1
Authorization: Bearer {{token}}

### 13. Get User Reviews
GET {{baseUrl}}/interactions/reviews/?user=1
Authorization: Bearer {{token}}

### ========== ADMIN ONLY APIs ==========

### 14. Block Review (Admin Only)
PATCH {{baseUrl}}/interactions/reviews/1/block/
Authorization: Bearer {{adminToken}}

### 15. Unblock Review (Admin Only)
PATCH {{baseUrl}}/interactions/reviews/1/unblock/
Authorization: Bearer {{adminToken}}

### 16. Delete Review (Admin Only - Soft Delete)
PATCH {{baseUrl}}/interactions/reviews/1/delete_review/
Authorization: Bearer {{adminToken}}

### 17. Restore Deleted Review (Admin Only)
PATCH {{baseUrl}}/interactions/reviews/1/restore_review/
Authorization: Bearer {{adminToken}}

### 18. Get Blocked Reviews (Admin Only)
GET {{baseUrl}}/interactions/reviews/blocked_reviews/
Authorization: Bearer {{adminToken}}

### 19. Get Banned Users Reviews (Admin Only)
GET {{baseUrl}}/interactions/reviews/banned_users_reviews/
Authorization: Bearer {{adminToken}}

### 20. Get Deleted Reviews (Admin Only)
GET {{baseUrl}}/interactions/reviews/deleted_reviews/
Authorization: Bearer {{adminToken}}

### 21. Get Reported Reviews (Admin Only)
GET {{baseUrl}}/interactions/reviews/reported_reviews/
Authorization: Bearer {{adminToken}}

### ========== TEST SCENARIOS ==========

### 22. Test Banned User Trying to Create Review (Should Fail)
POST {{baseUrl}}/interactions/reviews/
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "gym": 1,
    "rating": 1,
    "comment": "This should fail for banned user"
}

### 23. Test Regular User Trying to Block Review (Should Fail)
PATCH {{baseUrl}}/interactions/reviews/1/block/
Authorization: Bearer {{token}}

### 24. Test Regular User Accessing Admin APIs (Should Fail)
GET {{baseUrl}}/interactions/reviews/blocked_reviews/
Authorization: Bearer {{token}}

### 25. Test Complete Review Management Flow
### Create review
POST {{baseUrl}}/interactions/reviews/
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "gym": 2,
    "rating": 3,
    "comment": "Average gym, could be better"
}

### Report review (as gym owner)
POST {{baseUrl}}/interactions/reviews/2/report/
Authorization: Bearer {{token}}

### Block review (as admin)
PATCH {{baseUrl}}/interactions/reviews/2/block/
Authorization: Bearer {{adminToken}}

### Check blocked reviews (as admin)
GET {{baseUrl}}/interactions/reviews/blocked_reviews/
Authorization: Bearer {{adminToken}}

### Unblock review (as admin)
PATCH {{baseUrl}}/interactions/reviews/2/unblock/
Authorization: Bearer {{adminToken}}

### Delete review (as admin)
PATCH {{baseUrl}}/interactions/reviews/2/delete_review/
Authorization: Bearer {{adminToken}}

### Check deleted reviews (as admin)
GET {{baseUrl}}/interactions/reviews/deleted_reviews/
Authorization: Bearer {{adminToken}}

### Restore review (as admin)
PATCH {{baseUrl}}/interactions/reviews/2/restore_review/
Authorization: Bearer {{adminToken}}
